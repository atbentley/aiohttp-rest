sudo: no

matrix:
    include:
        - os: linux
          language: python
          python: 3.5
        - os: osx
          language: generic

before_cache:
  - rm -f $HOME/.cache/pip/log/debug.log

cache:
  directories:
  - $HOME/.cache/pip

before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install pyenv; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then pyenv install 3.5.0; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then pyenv global 3.5.0; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then virtualenv venv; fi
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then source venv/bin/activate; fi

install:
  - pip install --upgrade pip
  - pip install --upgrade setuptools
  - pip install -r requirements.txt -r build-requirements.txt

script:
  - py.test tests
